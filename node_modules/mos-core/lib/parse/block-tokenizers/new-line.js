'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = tokenizeNewline;

var _isWhiteSpace = require('../is-white-space');

var _isWhiteSpace2 = _interopRequireDefault(_isWhiteSpace);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Tokenise a line.
 *
 * @example
 *   tokenizeNewline(eat, '\n\n');
 *
 * @param {function(string)} eat - Eater.
 * @param {string} value - Rest of content.
 * @param {boolean?} [silent] - Whether this is a dry run.
 * @return {boolean?} - `true` when matching.
 */
function tokenizeNewline(parser, value, silent) {
  var character = value.charAt(0);
  var length = void 0;
  var subvalue = void 0;
  var queue = void 0;
  var index = void 0;

  if (character !== '\n') {
    return;
  }

  /* istanbul ignore if - never used (yet) */
  if (silent) {
    return true;
  }

  index = 1;
  length = value.length;
  subvalue = '\n';
  queue = '';

  while (index < length) {
    character = value.charAt(index);

    if (!(0, _isWhiteSpace2.default)(character)) {
      break;
    }

    queue += character;

    if (character === '\n') {
      subvalue += queue;
      queue = '';
    }

    index++;
  }

  parser.eat(subvalue);
}
module.exports = exports['default'];