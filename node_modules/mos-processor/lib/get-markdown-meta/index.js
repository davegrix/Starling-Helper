'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

exports.default = getMarkdownMeta;

var _readPkgUp = require('@zkochan/read-pkg-up');

var _readPkgUp2 = _interopRequireDefault(_readPkgUp);

var _githubUrlToObject = require('github-url-to-object');

var _githubUrlToObject2 = _interopRequireDefault(_githubUrlToObject);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getMarkdownMeta(filePath) {
  return (0, _readPkgUp2.default)({ cwd: filePath }).then(function (result) {
    var pkg = result.pkg;

    if (!pkg) return {};

    return {
      pkg: pkg,
      pkgRoot: _path2.default.dirname(result.path),
      repo: pkg.repository && pkg.repository.url && (0, _githubUrlToObject2.default)(pkg.repository.url)
    };
  }).then(function (opts) {
    return (0, _assign2.default)(opts, { filePath: filePath });
  });
}
module.exports = exports['default'];